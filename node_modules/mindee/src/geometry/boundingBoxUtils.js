"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBBoxForPolygons = exports.getBbox = exports.mergeBbox = exports.getBoundingBoxFromBBox = exports.getBoundingBox = void 0;
const boundingBox_1 = require("./boundingBox");
/**
 * Given a Polygon, calculate a polygon that encompasses all points.
 */
function getBoundingBox(polygon) {
    const bbox = getBbox(polygon);
    return getBoundingBoxFromBBox(bbox);
}
exports.getBoundingBox = getBoundingBox;
/**
 * Given a BBox, generate the associated bounding box.
 */
function getBoundingBoxFromBBox(bbox) {
    return [
        [bbox.xMin, bbox.yMin],
        [bbox.xMax, bbox.yMin],
        [bbox.xMax, bbox.yMax],
        [bbox.xMin, bbox.yMax],
    ];
}
exports.getBoundingBoxFromBBox = getBoundingBoxFromBBox;
/**
 * Given 2 bbox, merge them.
 */
function mergeBbox(bbox1, bbox2) {
    return new boundingBox_1.BBox(Math.min(bbox1.xMin, bbox2.xMin), Math.min(bbox1.yMin, bbox2.yMin), Math.max(bbox1.xMax, bbox2.xMax), Math.max(bbox1.yMax, bbox2.yMax));
}
exports.mergeBbox = mergeBbox;
/**
 * Given a Polygon, calculate a BBox that encompasses all points.
 */
function getBbox(polygon) {
    const allY = polygon.map((point) => point[1]);
    const allX = polygon.map((point) => point[0]);
    return new boundingBox_1.BBox(Math.min(...allX), Math.min(...allY), Math.max(...allX), Math.max(...allY));
}
exports.getBbox = getBbox;
/**
 * Given polygons, calculate a BBox that encompasses all points.
 */
function getBBoxForPolygons(polygons) {
    const allY = polygons.flatMap((polygon) => polygon.map((point) => point[1]));
    const allX = polygons.flatMap((polygon) => polygon.map((point) => point[0]));
    return new boundingBox_1.BBox(Math.min(...allX), Math.min(...allY), Math.max(...allX), Math.max(...allY));
}
exports.getBBoxForPolygons = getBBoxForPolygons;
